@model WeatherMashup.ViewModels.WeatherMashupViewModel

@{
    ViewBag.Title = "Index";
}

@section head
{
    @Styles.Render("~/Content/themes/base/css")
}
<div id="searchbarWrapper">
<div id="searchbar">

@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()
    
    
    @Html.EditorFor(m=>m.CityName)   
    <input type="submit" name="submit" id="submit"/>
   
}
</div>
    
</div>
@Vereyon.Web.FlashMessageHtmlHelper.RenderFlashMessages(Html)
@Html.ValidationSummary(true,"Unable to find location. Please correct the following")

@Html.Partial("ViewLocations")

@Html.Partial("ViewWeather")

@section Scripts
{

    @Scripts.Render("~/bundles/jqueryval")
    @Scripts.Render("~/bundles/jqueryui")
}
<!--TODO MOVE TO EXTERNAL JS SCRIPT -->
<!--Uncaught ReferenceError: $ is not defined(anonymous function)  at (index):52 -->
<!-- 
<script type="text/javascript">
    $(function () {

        $("#CityName").autocomplete({
            source: function (request, response) {
                //Define a function to call the action method.
                $.ajax({
                    url: '@Url.Action("GetLocations")',
                    data: { query: request.term }, // query will be the parameter used by the action method.
                    dataType: "json",
                    type: "GET",
                    success: function (data) {
                        response($.map(function(item){
                            return { value: item };
                        }))
                    }
                });
            }
        })
    });

</script>
    -->
